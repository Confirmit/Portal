<?xml version="1.0"?>
<configuration>
	<configSections>
		<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>
		<section name="portal" type="ConfirmIt.PortalLib.Configuration.PortalSection, PortalLib"/>
	</configSections>

	<connectionStrings>
		<add name="DBConnStr" connectionString="Persist Security Info=FALSE;User ID=portal;password=Ubghjldbufntkm911;Initial Catalog=Portal;Data Source=FI-YAR-DB01;Packet Size=4096;Workstation ID=KORNIENKO;" providerName="System.Data.SqlClient"/>
	</connectionStrings>

	<log4net>
		<appender name="PortalLogAppender" type="log4net.Appender.FileAppender">
			<file value="App_Data\PortalWebServiceLog.log"/>
			<appendToFile value="true"/>
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="%date %-5level - %message%newline"/>
			</layout>
		</appender>
		
		<logger name="PortalLog">
			<appender-ref ref="PortalLogAppender"/>
		</logger>
		
	</log4net>
	<portal defaultConnectionStringName="DBConnStr"/>
	
  <system.web>
    <compilation debug="true"/>
  </system.web>
	
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <service behaviorConfiguration="PortalWcfServiceLibrary.ServiceBehavior" name="PortalWcfServiceLibrary.PortalService">
        <endpoint address="" binding="wsHttpBinding" name="endPointHttp" contract="PortalWcfServiceLibrary.IPortalService">
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8080/Service/"/>
          </baseAddresses>
          <timeouts closeTimeout="00:10:00" openTimeout="00:10:00"/>
        </host>
      </service>

		<service behaviorConfiguration="PortalWcfServiceLibrary.ServiceBehavior" name="PortalWcfServiceLibrary.MoscowService">
			<endpoint address="" binding="wsHttpBinding" name="moscowEndPointHttp" contract="PortalWcfServiceLibrary.IPortalService">
				<identity>
					<dns value="localhost"/>
				</identity>
			</endpoint>
			<endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
			<host>
				<baseAddresses>
					<add baseAddress="http://localhost:8080/MoscowService/"/>
				</baseAddresses>
				<timeouts closeTimeout="00:10:00" openTimeout="00:10:00"/>
			</host>
		</service>
    </services>
	  
    <behaviors>
      <serviceBehaviors>
        <behavior name="PortalWcfServiceLibrary.ServiceBehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
			<serviceCredentials>
				<userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="ConfirmIt.Portal.WcfServiceLibrary.CustomUserValidator"/>
			</serviceCredentials>
		</behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup></configuration>
